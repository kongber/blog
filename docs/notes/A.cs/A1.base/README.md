# 计算机组成

计算机的基本硬件系统由运算器、控制器、存储器、输入设备和输出设备 5 大部件组成。

## 1 计算机系统组成
### 1.1 计算机系统概述
<img src="/images/cs/system.png" width="400" alt="计算机系统组成">

- 控制器：控制器是分析和执行指令的部件。控制器的组成如下：
  - 程序计数器(PC)：存储下一条指令的地址。
  - 指令寄存器(IR)：存储即将要执行的指令。
  - 指令译码器(ID)：对指令中的操作码字段进行分析解释。
  - 时序部件：提供时序控制信号。
- 运算器：在控制器的控制下，对数据进行各种算术运算和逻辑运算。
  - 算术逻辑单元(ALU)：进行算术运算和逻辑运算。
  - 累加寄存器(AC)：存放算术运算的中间结果。
  - 数据缓冲寄存器(DR)：写内存时，暂存指令或数据。
  - 状态条件寄存器(PSW)：存状态标志与控制标志。
- 存储器：存储器是用来存放程序和数据的部件，内存 + 外存。
- 输入设备：键盘、鼠标、扫描仪、光电输入设备。
- 输出设备：显示器、打印机、绘图仪、磁带、光盘。

### 1.2 复杂指令集系统与精简指令集系统

| 名称               | RISC 精简指令集计算机<br />Reduced Instruction Set Computer | **CISC 复杂指令集计算机<br />Complex Instruction Set Computing** |
| ------------------ | ----------------------------------------------------------- | ------------------------------------------------------------ |
| **指令种类**       | **少、精简**                                                | **多、丰富**                                                 |
| **指令复杂度**     | **低（简单）**                                              | **高（复杂）**                                               |
| **指令长度**       | **固定**                                                    | **变化**                                                     |
| **寻址方式**       | **少**                                                      | **复杂多样**                                                 |
| **实现方式**       | **硬布线控制逻辑（组合逻辑控制器）**                        | **微程序控制技术**                                           |


## 3. 流水线
概念：流水线指在程序执行时多条指令重叠进行操作的一共准并行处理的技术。

过程：取指 → 分析 → 执行

**未优化流水线：**

| 取指 |  |  | 取指 |  |  | 取指 |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  | 分析 |  |  | 分析 |  |  | 分析 |  |
|  |  | 执行 |  |  | 执行 |  |  | 执行 |

优化后的流水线：（将空余时间片利用起来。）

| 取指 | 取指 | 取指 | 取指 | 取指 | 取指 | 取指 |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  | 分析 | 分析 | 分析 | 分析 | 分析 | 分析 | 分析 |  |
|  |  | 执行 | 执行 | 执行 | 执行 | 执行 | 执行 | 执行 |

流水线周期：

$$
流水线周期：Max(t_{取指}  , t_{分析} , t_{执行})
$$

流水线执行时间：

$$
串行：(t_{取指}  + t_{分析} + t_{执行}）\times 指令条数
$$


$$
并行：(t_{取指}  + t_{分析} + t_{执行}）+  (指令条数 - 1) \times 流水线周期
$$


流水线的吞吐率：

$$
吞吐率 = \dfrac{指令条数}{流水线执行时间（一条完整指令的时间 + （指令条数 -1） * 流水线周期）} 
$$

## 4. 吞吐率